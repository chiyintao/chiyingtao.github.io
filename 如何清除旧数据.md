# 如何清除旧数据

## 问题现象

如果您打开笔记应用后，看到的章节标题还是英文，例如：
- "Chapter 1: The Drawing"
- "Chapter 2: The Crash"
- "The Little Prince"

这说明浏览器缓存了旧的数据。

## 解决方法

### 方法一：使用清除工具（推荐）

1. 打开 `清除旧数据.html` 文件
2. 点击"清除旧数据"按钮
3. 等待 3 秒自动跳转
4. 或者手动点击"打开笔记应用"按钮

### 方法二：手动清除浏览器数据

#### Chrome / Edge 浏览器

1. 按 `F12` 打开开发者工具
2. 点击"Application"（应用程序）标签
3. 在左侧找到"Local Storage"
4. 点击您的网站地址
5. 右键点击空白处，选择"Clear"（清除）
6. 刷新页面

#### Firefox 浏览器

1. 按 `F12` 打开开发者工具
2. 点击"Storage"（存储）标签
3. 在左侧找到"Local Storage"
4. 点击您的网站地址
5. 右键点击，选择"Delete All"（删除全部）
6. 刷新页面

### 方法三：使用浏览器控制台

1. 按 `F12` 打开开发者工具
2. 点击"Console"（控制台）标签
3. 输入以下代码并按回车：

```javascript
// 清除所有笔记数据
Object.keys(localStorage).forEach(key => {
    if (key.startsWith('notebooks') || 
        key.startsWith('chapters_') || 
        key.startsWith('page_') || 
        key.startsWith('annotations_')) {
        localStorage.removeItem(key);
    }
});
console.log('旧数据已清除');
location.reload();
```

4. 页面会自动刷新

## 为什么会出现这个问题？

浏览器的 localStorage 会持久化保存数据，即使更新了代码，旧的数据仍然存在。

当应用启动时：
1. 首先尝试从 localStorage 加载数据
2. 如果找到旧数据，就使用旧数据
3. 只有在没有数据时，才会创建新的默认数据

所以需要手动清除旧数据，让应用重新创建中文的默认数据。

## 清除后会发生什么？

清除旧数据后，应用会自动创建新的默认数据：

### 默认笔记本
1. **小王子**（4个章节）
   - 第一章：绘画
   - 第二章：坠机
   - 第五章：猴面包树
   - 第二十一章：狐狸

2. **窗边的小豆豆**（4个章节）
   - 第一章：第一次来车站
   - 第二章：电车教室
   - 第三章：上课
   - 第四章：海的味道，山的味道

3. **项目笔记**（空）

4. **日常草稿**（空）

## 如何备份现有数据？

如果您想保留现有的笔记内容，请在清除前：

1. 打开笔记应用
2. 点击左侧边栏底部的"导出"按钮
3. 保存 JSON 文件
4. 清除旧数据后，可以通过"导入"按钮恢复

## 常见问题

### Q: 清除后能恢复吗？
A: 不能。清除是永久性的。如果需要保留数据，请先导出备份。

### Q: 清除后还是英文怎么办？
A: 尝试以下步骤：
1. 完全关闭浏览器
2. 重新打开浏览器
3. 清除浏览器缓存（Ctrl+Shift+Delete）
4. 再次打开笔记应用

### Q: 为什么不自动清除旧数据？
A: 为了保护用户数据。自动清除可能导致用户丢失重要笔记。

### Q: 可以同时保留旧数据和新数据吗？
A: 不可以。但您可以：
1. 导出旧数据
2. 清除 localStorage
3. 使用新的中文界面
4. 需要时导入旧数据

## 技术说明

应用使用以下 localStorage 键：
- `notebooks` - 笔记本列表
- `chapters_1`, `chapters_2`, ... - 各笔记本的章节
- `page_0_0`, `page_0_1`, ... - 页面内容
- `annotations_0_0`, ... - 组件数据

清除这些键后，应用会重新初始化默认数据。

## 更新日志

### v1.4.1 (2026-02-05)
- ✅ 改名为"笔记"
- ✅ 创建清除旧数据工具
- ✅ 添加清除说明文档

---

如有其他问题，请查看 `快速开始.md` 文档。
