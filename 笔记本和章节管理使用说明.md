# 笔记本和章节管理使用说明

## 新增功能

### 1. 笔记本管理

#### 添加新笔记本
- 在左侧边栏底部，点击 **"New Notebook"** 按钮
- 输入笔记本名称
- 点击确定即可创建

#### 编辑笔记本名称
- 点击笔记本名称使其可编辑
- 修改名称后点击其他地方保存
- 名称会自动保存到 localStorage

#### 切换笔记本
- 点击任意笔记本即可切换
- 当前笔记本会高亮显示
- 切换后会加载该笔记本的所有章节

### 2. 章节管理

#### 添加新章节
- 在中间章节面板底部，点击 **"Add New Chapter"** 按钮
- 输入章节标题
- 新章节会自动创建并切换到该章节

#### 编辑章节信息
所有章节信息都可以直接点击编辑：

1. **日期标签**（顶部灰色文字）
   - 点击即可编辑
   - 例如："Day 1", "2024-02-05" 等

2. **章节标题**（中间大标题）
   - 点击即可编辑
   - 例如："Chapter 1: The Drawing"

3. **副标题**（底部斜体文字）
   - 点击即可编辑
   - 例如："A Hat or a Snake?"

#### 切换章节
- 点击任意章节卡片即可切换
- 当前章节会高亮显示（紫色边框）
- 切换后会加载该章节的内容和组件

## 数据存储

### 存储位置
所有数据保存在浏览器的 localStorage 中：

- **笔记本列表**: `notebooks`
- **章节数据**: `chapters_{notebookId}`
- **页面内容**: `page_{chapterIndex}_{pageIndex}`
- **组件数据**: `annotations_{chapterIndex}_{pageIndex}`

### 数据结构

#### 笔记本数据
```javascript
{
    id: 1234567890,           // 唯一ID（时间戳）
    name: "My Notebook",      // 笔记本名称
    icon: "📖"                // 图标（预留）
}
```

#### 章节数据
```javascript
{
    id: 1234567890,                    // 唯一ID
    title: "Chapter 1",                // 标题
    subtitle: "Subtitle",              // 副标题
    date: "Day 1",                     // 日期标签
    pageCount: 2,                      // 页数
    content: ["<p>...</p>", "..."]     // 每页的HTML内容
}
```

## 使用技巧

### 1. 组织笔记
- 为不同项目创建不同的笔记本
- 在每个笔记本中创建多个章节
- 使用有意义的标题和副标题

### 2. 快速编辑
- 双击文字即可快速进入编辑模式
- 按 Tab 键可以在不同字段间切换
- 点击其他地方自动保存

### 3. 数据备份
- 定期导出 localStorage 数据（功能待开发）
- 或者手动复制重要内容到其他地方
- 清除浏览器数据会丢失所有内容

## 注意事项

### ⚠️ 重要提示

1. **数据持久化**
   - 数据保存在浏览器本地
   - 不同浏览器数据不共享
   - 清除浏览器数据会丢失所有内容

2. **存储限制**
   - localStorage 通常限制 5-10MB
   - 大量图片可能导致存储失败
   - 建议控制图片大小和数量

3. **编辑冲突**
   - 同时编辑多个字段可能导致数据丢失
   - 建议一次只编辑一个字段
   - 编辑完成后等待自动保存

4. **浏览器兼容性**
   - 需要现代浏览器支持
   - 建议使用 Chrome、Firefox、Edge
   - IE 浏览器不支持

## 快捷操作

### 键盘快捷键（计划中）
- `Ctrl + N`: 新建笔记本
- `Ctrl + Shift + N`: 新建章节
- `Ctrl + E`: 编辑当前标题
- `Ctrl + S`: 手动保存（当前自动保存）

### 鼠标操作
- **单击**: 选择/切换
- **双击**: 快速编辑
- **右键**: 上下文菜单（计划中）

## 常见问题

### Q: 如何删除笔记本或章节？
A: 删除功能计划在下一版本添加。当前可以通过浏览器开发者工具手动删除 localStorage 数据。

### Q: 可以导出数据吗？
A: 导出/导入功能计划在下一版本添加。

### Q: 数据会同步到云端吗？
A: 当前版本仅支持本地存储，云端同步功能在未来版本规划中。

### Q: 可以添加图标或颜色吗？
A: 笔记本图标和颜色自定义功能在未来版本规划中。

## 更新日志

### v1.1.0 (2026-02-05)
- ✅ 添加笔记本管理功能
- ✅ 添加章节管理功能
- ✅ 支持标题编辑
- ✅ 自动保存所有更改
- ✅ 数据持久化到 localStorage

### 计划功能 (v1.2.0)
- ⏳ 删除笔记本/章节
- ⏳ 数据导出/导入
- ⏳ 笔记本图标自定义
- ⏳ 章节排序
- ⏳ 搜索功能

## 技术支持

如有问题，请查看：
- `功能说明.md` - 完整功能说明
- `架构说明.md` - 技术架构
- 浏览器开发者工具 Console - 查看错误日志
