# Little Prince Journal - 功能说明

## 项目概述

这是一个基于 Web 的交互式笔记本应用，灵感来自《小王子》。用户可以在虚拟笔记本中创建章节、编写内容，并添加各种可拖拽的组件（便签、图片、箭头、文字框）。

## 版本说明

### 原始版本
- **文件**: `little-prince-journal.html`
- **特点**: 单文件包含所有代码
- **适用**: 快速部署、简单使用

### 模块化版本 ⭐ 推荐
- **文件**: `little-prince-journal-modular.html` + `js/` 目录
- **特点**: 代码分离，易于维护
- **适用**: 长期开发、团队协作

## 核心功能

### 1. 笔记本结构
- **笔记本**: 顶层容器（如"The Little Prince"）
- **章节**: 笔记本下的分组（如"Chapter 1: The Drawing"）
- **页面**: 章节下的具体内容页

### 2. 编辑工具

#### 便签（Sticky Note）
- 黄色便签纸样式
- 可编辑文本内容
- 支持拖动、缩放、旋转

#### 图片（Image）
- 上传本地图片
- 自动压缩大图片（>500KB → ≤500KB）
- 支持拖动、缩放、旋转
- 白色相框边框

#### 箭头（Arrow）
- 弯曲虚线箭头
- 橙色样式
- 支持拖动、缩放、旋转

#### 文字框（Text Box）
- 透明背景
- 可编辑文本
- 支持拖动、缩放、旋转

### 3. 组件操作

#### 拖动
- 鼠标按住组件即可拖动
- 拖动时底部显示垃圾桶

#### 缩放
- 选中组件后，拖动右下角紫色手柄
- 等比例缩放，保持宽高比

#### 旋转
- 选中组件后，拖动右上角橙色手柄
- 360° 自由旋转

#### 删除
- 拖动组件到底部垃圾桶
- 垃圾桶变红表示可删除
- 松开鼠标完成删除

### 4. 界面布局

#### 左侧边栏 - 笔记本列表
- 显示所有笔记本
- 点击切换笔记本
- 底部显示存储空间使用情况

#### 中间面板 - 章节列表
- 显示当前笔记本的所有章节
- 点击切换章节
- 可折叠/展开（点击折叠按钮）

#### 右侧主区域 - 编辑器
- 顶部工具栏：便签、图片、箭头、文字框
- 中间纸张区域：可编辑内容 + 可拖拽组件
- 底部分页器：切换页面
- 右上角全屏按钮

### 5. 数据持久化

#### 自动保存
- **页面内容**: 输入后 1 秒自动保存
- **组件布局**: 操作后 0.5 秒自动保存
- 无需手动保存按钮

#### 存储位置
- 使用浏览器 localStorage
- 数据保存在本地浏览器
- 不同浏览器数据独立

#### 存储内容
- 页面文本内容
- 组件类型、位置、大小、旋转角度
- 组件内部内容（文本、图片）

### 6. 图片处理

#### 自动压缩
- 检测上传图片大小
- 超过 500KB 自动压缩
- 目标大小: ≤500KB
- 最大尺寸: 1200px

#### 压缩策略
1. 缩小尺寸（保持宽高比）
2. 降低质量（JPEG 格式）
3. 显示压缩进度提示

### 7. 用户体验

#### 视觉反馈
- 组件选中时显示虚线边框
- 拖动时组件半透明
- 垃圾桶悬停时变红放大
- 按钮悬停时高亮

#### 交互提示
- 工具栏图标有 tooltip
- 加载图片时显示"正在处理图片..."
- 保存失败时弹出提示

#### 响应式设计
- 适配不同屏幕尺寸
- 全屏模式支持
- 侧边栏可折叠节省空间

## 技术特性

### 前端技术
- **HTML5**: 语义化标签
- **CSS3**: 现代样式、动画、渐变
- **JavaScript ES6+**: 模块化、箭头函数、Promise
- **Tailwind CSS**: 快速样式开发

### 浏览器 API
- **localStorage**: 数据持久化
- **FileReader**: 读取本地文件
- **Canvas**: 图片压缩
- **Custom Events**: 模块间通信

### 设计模式
- **模块化**: 功能分离，职责单一
- **事件驱动**: 松耦合通信
- **状态管理**: 集中管理应用状态

## 使用场景

### 个人笔记
- 日记、随笔
- 学习笔记
- 创意记录

### 项目管理
- 任务规划
- 进度跟踪
- 想法整理

### 创意设计
- 故事板
- 思维导图
- 视觉笔记

## 浏览器兼容性

### 支持的浏览器
- ✅ Chrome 90+
- ✅ Firefox 88+
- ✅ Edge 90+
- ✅ Safari 14+

### 不支持的浏览器
- ❌ IE 11 及以下
- ❌ 旧版移动浏览器

## 性能优化

### 已实现
- 图片自动压缩
- 防抖保存（避免频繁写入）
- 事件委托
- CSS 动画（GPU 加速）

### 限制
- localStorage 容量限制（5-10MB）
- 建议单页组件数量 <50
- 建议图片总大小 <5MB

## 已知问题

1. **localStorage 限制**: 存储空间有限，大量图片可能导致存储失败
2. **跨浏览器数据**: 不同浏览器数据不共享
3. **数据备份**: 清除浏览器数据会丢失所有内容
4. **移动端体验**: 触摸操作支持有限
5. **字符编码问题**: 部分中文tooltip可能显示为乱码（不影响功能使用）
   - 影响范围：工具栏按钮的悬停提示文字
   - 解决方案：功能完全正常，只是提示文字显示异常
   - 临时方案：通过图标即可识别功能（便签、图片、箭头、文字框）

## 未来计划

### 短期（v1.1）
- [ ] 笔记本管理（添加、编辑、删除）
- [ ] 章节管理（添加、编辑、删除）
- [ ] 标题可编辑
- [ ] 数据导出/导入（JSON）

### 中期（v1.2）
- [ ] 云端同步
- [ ] 多人协作
- [ ] 更多组件类型（表格、代码块）
- [ ] 主题切换

### 长期（v2.0）
- [ ] 移动端 App
- [ ] 离线支持（PWA）
- [ ] AI 辅助写作
- [ ] 版本历史

## 开发者信息

### 项目结构
```
Kimi_Agent_Deployment_v1/
├── little-prince-journal.html          # 原始版本
├── little-prince-journal-modular.html  # 模块化版本
├── js/                                 # JavaScript 模块
│   ├── storage.js
│   ├── imageUtils.js
│   ├── dragManager.js
│   ├── annotationManager.js
│   └── app.js
├── 功能说明.md                         # 本文件
├── 架构说明.md                         # 技术架构
├── 笔记本管理功能说明.md               # 详细功能说明
└── 迁移完成说明.md                     # 迁移指南
```

### 贡献指南
1. Fork 项目
2. 创建功能分支
3. 提交代码
4. 发起 Pull Request

### 许可证
MIT License

## 联系方式

如有问题或建议，请通过以下方式联系：
- 提交 Issue
- 发送邮件
- 查看文档

---

**版本**: v1.0.0  
**更新日期**: 2026-02-05  
**状态**: 稳定版
