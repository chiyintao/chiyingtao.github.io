# 页数管理使用说明

## 新增功能

### 页数管理

每个章节现在可以包含多个页面，您可以自由添加或删除页面。

## 功能说明

### 1. 查看页数信息

在右下角的分页器中，您可以看到：
- **当前页/总页数**（如 "1 / 3"）
- **章节.页码**（如 "PAGE 1.1"）

### 2. 添加新页面

**方法一：使用按钮**
- 点击分页器右侧的 **紫色 "+" 按钮**
- 新页面会自动添加到当前章节末尾
- 自动切换到新页面

**方法二：使用函数**
```javascript
App.addNewPage()
```

### 3. 删除页面

**方法一：使用按钮**
- 点击分页器左侧的 **红色垃圾桶按钮**
- 确认删除提示
- 注意：最后一页无法删除

**方法二：使用函数**
```javascript
App.deleteCurrentPage()
```

### 4. 切换页面

**使用箭头按钮**
- **← 按钮**：上一页
- **→ 按钮**：下一页

**跨章节切换**
- 在第一页按 ← 会跳到上一章节的最后一页
- 在最后一页按 → 会跳到下一章节的第一页

## 分页器按钮说明

从左到右：

1. **🗑️ 红色按钮** - 删除当前页面
2. **← 按钮** - 上一页
3. **页数信息** - 显示当前页/总页数
4. **→ 按钮** - 下一页
5. **+ 紫色按钮** - 添加新页面

## 数据存储

### 页面内容存储
- **键名格式**: `page_{chapterIndex}_{pageIndex}`
- **存储内容**: 页面的 HTML 内容
- **自动保存**: 输入后 1 秒自动保存

### 组件数据存储
- **键名格式**: `annotations_{chapterIndex}_{pageIndex}`
- **存储内容**: 页面上的所有组件（便签、图片、箭头、文字框）
- **自动保存**: 操作后 0.5 秒自动保存

### 章节数据存储
- **键名格式**: `chapters_{notebookId}`
- **存储内容**: 包含 `pageCount` 和 `content` 数组
- **自动更新**: 添加/删除页面时自动更新

## 使用场景

### 1. 长篇笔记
- 将长文章分成多个页面
- 每页专注一个主题
- 便于组织和查找

### 2. 图文混排
- 第一页：文字说明
- 第二页：配图和标注
- 第三页：总结

### 3. 分步教程
- 每页一个步骤
- 添加截图和说明
- 按顺序浏览

### 4. 日记本
- 每天一页
- 添加照片和心情
- 按日期翻阅

## 注意事项

### ⚠️ 重要提示

1. **最后一页保护**
   - 每个章节至少保留一页
   - 删除最后一页会提示错误
   - 建议先添加新页再删除旧页

2. **数据同步**
   - 页面内容和组件数据分别存储
   - 删除页面会同时删除内容和组件
   - 无法恢复已删除的页面

3. **页码变化**
   - 删除页面后，后续页面的页码会自动调整
   - 例如：删除第2页后，原第3页变成第2页

4. **存储限制**
   - 页面越多，占用存储空间越大
   - 建议每个章节不超过 20 页
   - 大量图片会快速消耗存储空间

## 快捷操作

### 键盘快捷键（计划中）
- `Ctrl + →`: 下一页
- `Ctrl + ←`: 上一页
- `Ctrl + Shift + N`: 新建页面
- `Ctrl + Shift + D`: 删除页面

### 鼠标操作
- **单击按钮**: 执行对应操作
- **悬停按钮**: 显示提示信息
- **滚轮**: 滚动页面内容（不翻页）

## 常见问题

### Q: 如何快速跳转到指定页面？
A: 当前需要连续点击箭头按钮。页面跳转功能计划在下一版本添加。

### Q: 可以调整页面顺序吗？
A: 页面排序功能计划在下一版本添加。

### Q: 删除的页面可以恢复吗？
A: 当前版本不支持恢复。建议重要内容先备份。

### Q: 页面数量有限制吗？
A: 理论上无限制，但受 localStorage 容量限制（5-10MB）。建议每章节不超过 20 页。

### Q: 可以复制页面吗？
A: 页面复制功能计划在下一版本添加。

## 中文字体更新

### 新增字体

为了让中文显示更有趣，我们添加了以下手写风格字体：

1. **刘建毛草** (Liu Jian Mao Cao) - 手写体
2. **志芒星** (Zhi Mang Xing) - 手写体
3. **马善政** (Ma Shan Zheng) - 手写体
4. **龙藏** (Long Cang) - 手写体

### 字体应用

- **标题**: 使用 Ma Shan Zheng（马善政）
- **正文**: 使用 Liu Jian Mao Cao（刘建毛草）
- **便签**: 使用 Zhi Mang Xing（志芒星）
- **装饰文字**: 使用 Long Cang（龙藏）

### 字体特点

- ✅ 手写风格，更有个性
- ✅ 支持中文和英文
- ✅ 自动回退到系统字体
- ✅ 通过 Google Fonts 加载

## 更新日志

### v1.2.0 (2026-02-05)
- ✅ 添加页数管理功能
- ✅ 支持添加新页面
- ✅ 支持删除页面
- ✅ 更新中文字体为手写风格
- ✅ 优化分页器UI
- ✅ 显示当前页/总页数

### 计划功能 (v1.3.0)
- ⏳ 页面跳转功能
- ⏳ 页面排序
- ⏳ 页面复制
- ⏳ 批量操作
- ⏳ 页面模板

## 技术支持

如有问题，请查看：
- `功能说明.md` - 完整功能说明
- `笔记本和章节管理使用说明.md` - 笔记本管理
- 浏览器开发者工具 Console - 查看错误日志
